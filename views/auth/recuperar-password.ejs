<%- include('../partials/header') %>

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card">
        <div class="card-body">
          <h2 class="text-center mb-4">Recuperar Contraseña</h2>
          
          <!-- Paso 1: Formulario de correo -->
          <form id="formCorreo" class="needs-validation" novalidate>
            <div class="mb-3">
              <label for="correo" class="form-label">Correo Electrónico</label>
              <input type="email" class="form-control" id="correo" name="correo" required>
              <div class="invalid-feedback" id="correoError"></div>
            </div>
            <button type="submit" class="btn btn-primary w-100">Verificar Correo</button>
          </form>

          <!-- Paso 2: Pregunta de seguridad (inicialmente oculto) -->
          <form id="formRespuesta" class="needs-validation mt-3 d-none" novalidate>
            <div class="mb-3">
              <label id="preguntaLabel" class="form-label">Pregunta de Seguridad</label>
              <input type="text" class="form-control" id="respuesta" name="respuesta" required>
              <div class="invalid-feedback" id="respuestaError"></div>
            </div>
            <div class="mb-3">
              <label for="nuevaContraseña" class="form-label">Nueva Contraseña</label>
              <div class="input-group">
                <input type="password" class="form-control" id="nuevaContraseña" name="nuevaContraseña" required>
                <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                  <i class="bi bi-eye"></i>
                </button>
              </div>
              <div class="invalid-feedback" id="nuevaContraseñaError"></div>
            </div>
            <div class="mb-3">
              <label for="confirmarContraseña" class="form-label">Confirmar Contraseña</label>
              <div class="input-group">
                <input type="password" class="form-control" id="confirmarContraseña" name="confirmarContraseña" required>
                <button class="btn btn-outline-secondary" type="button" id="toggleConfirmPassword">
                  <i class="bi bi-eye"></i>
                </button>
              </div>
              <div class="invalid-feedback" id="confirmarContraseñaError"></div>
            </div>
            <button type="submit" class="btn btn-primary w-100">Cambiar Contraseña</button>
          </form>

          <div class="mt-3 text-center">
            <a href="/auth/login" class="text-decoration-none">Volver al inicio de sesión</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="/js/forms/reset-password.js"></script>

<%- include('../partials/footer') %> 